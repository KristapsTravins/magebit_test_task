{"ast":null,"code":"import _objectSpread from\"/home/pc/Desktop/Work/Magebit/magebit_test_task/front/Subscribtion/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useContext}from'react';import LinkButtons from'./LinkButtons';import{useForm}from\"react-hook-form\";import{SendDb}from'../api/apiCall';import{StateContext}from'./MainBlock';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SendSub=function SendSub(){var _useContext=useContext(StateContext),isSub=_useContext.isSub,setSub=_useContext.setSub;// validation\nvar _useForm=useForm({criteriaMode:\"all\"}),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit;var onSubmit=function onSubmit(data){SendDb(data);setSub(!isSub);};var isCo=function isCo(val){var str=\"\";for(var i=val.length-1;i>0;i--){str+=val[i];if(str===\"oc.\"){return false;}}return true;};return/*#__PURE__*/_jsxs(\"div\",{className:\"text_box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text_main\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Subscribe to newsletter\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text_secondary\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Subscribe to our newsletter and get 10% discount on pineapple glasses.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_box\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_inner\",id:\"email_input\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({name:\"email\"},register(\"email\",{validate:{isValidEmail:function isValidEmail(email){return /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email);},containsCo:function containsCo(value){return isCo(value);},minChars:function minChars(value){return value.length>10;}}})),{},{placeholder:\"Enter your email\"})),/*#__PURE__*/_jsx(\"div\",{className:\"input_button\",style:{cursor:\"pointer\"},children:/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"svg\",{width:\"24\",height:\"14\",viewBox:\"0 0 24 14\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{opacity:\"0.3\",d:\"M17.7071 0.2929C17.3166 -0.0976334 16.6834 -0.0976334 16.2929 0.2929C15.9023 0.683403 15.9023 1.31658 16.2929 1.70708L20.5858 5.99999H1C0.447693 5.99999 0 6.44772 0 6.99999C0 7.55227 0.447693 7.99999 1 7.99999H20.5858L16.2929 12.2929C15.9023 12.6834 15.9023 13.3166 16.2929 13.7071C16.6834 14.0976 17.3166 14.0976 17.7071 13.7071L23.7071 7.70708C24.0977 7.31658 24.0977 6.6834 23.7071 6.2929L17.7071 0.2929Z\",fill:\"#131821\"})})})})]}),errors.email&&errors.email.type===\"containsCo\"&&/*#__PURE__*/_jsx(\"p\",{id:\"err\",children:\"We dont accept .co domains\"}),errors.email&&errors.email.type===\"isValidEmail\"&&/*#__PURE__*/_jsx(\"p\",{id:\"err\",children:\"You must enter email\"}),errors.email&&errors.email.type===\"minChars\"&&/*#__PURE__*/_jsx(\"p\",{id:\"err\",children:\"Email must be longer than 10 characters\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"check_box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"terms_and_conditions\",name:\"terms_and_conditions\",value:\"accept\",required:true}),/*#__PURE__*/_jsxs(\"label\",{for:\"terms_and_conditions\",id:\"terms_text\",children:[\" I agree to \",/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"terms of service\"})]})]})]}),/*#__PURE__*/_jsx(LinkButtons,{})]})]});};export default SendSub;","map":{"version":3,"sources":["/home/pc/Desktop/Work/Magebit/magebit_test_task/front/Subscribtion/src/components/SendSub.js"],"names":["React","useContext","LinkButtons","useForm","SendDb","StateContext","SendSub","isSub","setSub","criteriaMode","register","errors","formState","handleSubmit","onSubmit","data","isCo","val","str","i","length","validate","isValidEmail","email","test","containsCo","value","minChars","cursor","type"],"mappings":"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","sourcesContent":["import React,{useContext} from 'react';\nimport LinkButtons from './LinkButtons';\nimport { useForm } from \"react-hook-form\";\nimport { SendDb } from '../api/apiCall';\nimport { StateContext } from './MainBlock';\n\nconst SendSub = () => {\nconst {isSub,setSub} = useContext(StateContext);\n// validation\nconst { register, formState:{errors}, handleSubmit } = useForm({criteriaMode: \"all\"});\n  const onSubmit = (data) => {\n    SendDb(data);\n    \n    setSub(!isSub);\n  };\n    const isCo = (val) =>{\n        let str = \"\";\n      for(let i = val.length-1;i>0;i--){\n          str += val[i];\n          if(str === \"oc.\"){\n              return false\n          }\n      }\n      return true\n    }\n    return (\n        <div className=\"text_box\">\n        <div className=\"text_main\">\n        <h1>Subscribe to newsletter</h1>\n        </div>\n       <div className=\"text_secondary\">\n       <h2>Subscribe to our newsletter and get 10% discount on pineapple glasses.</h2>\n       </div>\n       <div className=\"form_box\">\n        <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"form_inner\" id=\"email_input\">\n                <input name=\"email\" {...register(\"email\",{\n                    validate:{\n                        isValidEmail:email =>\n                        /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\n                          email\n                        ),\n                    containsCo:value=>{return isCo(value)},\n                    minChars:value=>{return value.length > 10 }\n                }})} placeholder=\"Enter your email\" />\n                <div className=\"input_button\"  style={{cursor:\"pointer\"}} >\n                        <button>\n                    <svg  width=\"24\" height=\"14\" viewBox=\"0 0 24 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path opacity=\"0.3\" d=\"M17.7071 0.2929C17.3166 -0.0976334 16.6834 -0.0976334 16.2929 0.2929C15.9023 0.683403 15.9023 1.31658 16.2929 1.70708L20.5858 5.99999H1C0.447693 5.99999 0 6.44772 0 6.99999C0 7.55227 0.447693 7.99999 1 7.99999H20.5858L16.2929 12.2929C15.9023 12.6834 15.9023 13.3166 16.2929 13.7071C16.6834 14.0976 17.3166 14.0976 17.7071 13.7071L23.7071 7.70708C24.0977 7.31658 24.0977 6.6834 23.7071 6.2929L17.7071 0.2929Z\" fill=\"#131821\"/>\n                    </svg>\n                        </button>\n                </div>\n            </div>\n            {errors.email && errors.email.type === \"containsCo\" && <p id=\"err\">We dont accept .co domains</p>}\n            {errors.email && errors.email.type === \"isValidEmail\" && <p id=\"err\">You must enter email</p>}\n            {errors.email && errors.email.type === \"minChars\" && <p id=\"err\">Email must be longer than 10 characters</p>}\n            <div className=\"check_box\">\n            <input type=\"checkbox\" id=\"terms_and_conditions\" name=\"terms_and_conditions\" value=\"accept\" required/>\n            <label for=\"terms_and_conditions\" id=\"terms_text\" > I agree to <a href=\"/\">terms of service</a></label>\n            </div>\n        </form>\n    <LinkButtons />\n    </div>\n    </div>\n    )\n}\n\nexport default SendSub\n"]},"metadata":{},"sourceType":"module"}